---
---
<div class="h-full flex flex-col">
    <div class="mb-4">
        <h3 class="text-xl font-bold text-zinc-900 dark:text-zinc-100 mb-2">Generador de Contraseñas</h3>
        <p class="text-sm text-zinc-600 dark:text-zinc-400">Crea contraseñas robustas y aleatorias al instante.</p>
    </div>

    <div class="flex-grow space-y-4">
        <!-- Display Password -->
        <div class="relative group">
            <input type="text" id="password-output" readonly 
                class="w-full bg-zinc-100 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-lg p-3 text-lg font-mono text-center text-zinc-800 dark:text-zinc-200 focus:outline-none focus:ring-2 focus:ring-orange-500/50"
                value="Haga clic en Generar" />
            
            <button id="copy-btn" class="absolute right-2 top-1/2 -translate-y-1/2 p-2 text-zinc-500 hover:text-green-600 transition-colors" title="Copiar">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <span id="copy-feedback" class="absolute right-10 top-1/2 -translate-y-1/2 text-xs text-green-600 font-bold opacity-0 transition-opacity pointer-events-none">¡Copiado!</span>
        </div>

        <!-- Controls -->
        <div class="space-y-4 bg-zinc-50 dark:bg-zinc-900/50 p-4 rounded-lg border border-zinc-200 dark:border-zinc-800">
            <div>
                <div class="flex justify-between mb-1">
                    <label for="length-range" class="text-sm font-medium text-zinc-700 dark:text-zinc-300">Longitud: <span id="length-val">16</span></label>
                </div>
                <input type="range" id="length-range" min="8" max="64" value="16" class="w-full accent-orange-500 h-2 bg-zinc-200 rounded-lg appearance-none cursor-pointer dark:bg-zinc-700">
            </div>

            <div class="grid grid-cols-2 gap-2">
                <label class="flex items-center space-x-2 text-sm text-zinc-700 dark:text-zinc-300 cursor-pointer">
                    <input type="checkbox" id="chk-uppercase" checked class="w-4 h-4 text-orange-600 rounded focus:ring-orange-500 border-gray-300">
                    <span>Mayúsculas</span>
                </label>
                <label class="flex items-center space-x-2 text-sm text-zinc-700 dark:text-zinc-300 cursor-pointer">
                    <input type="checkbox" id="chk-lowercase" checked class="w-4 h-4 text-orange-600 rounded focus:ring-orange-500 border-gray-300">
                    <span>Minúsculas</span>
                </label>
                <label class="flex items-center space-x-2 text-sm text-zinc-700 dark:text-zinc-300 cursor-pointer">
                    <input type="checkbox" id="chk-numbers" checked class="w-4 h-4 text-orange-600 rounded focus:ring-orange-500 border-gray-300">
                    <span>Números</span>
                </label>
                <label class="flex items-center space-x-2 text-sm text-zinc-700 dark:text-zinc-300 cursor-pointer">
                    <input type="checkbox" id="chk-symbols" checked class="w-4 h-4 text-orange-600 rounded focus:ring-orange-500 border-gray-300">
                    <span>Símbolos</span>
                </label>
            </div>
        </div>

        <button id="generate-btn" class="w-full py-3 bg-zinc-900 dark:bg-zinc-100 hover:bg-orange-600 dark:hover:bg-orange-400 text-white dark:text-zinc-900 font-bold rounded-lg transition-colors shadow-lg hover:shadow-orange-500/20">
            Generar Contraseña
        </button>
    </div>
</div>

<script>
    const lengthRange = document.getElementById('length-range');
    const lengthVal = document.getElementById('length-val');
    const output = document.getElementById('password-output');
    const generateBtn = document.getElementById('generate-btn');
    const copyBtn = document.getElementById('copy-btn');
    const copyFeedback = document.getElementById('copy-feedback');

    const chkUpper = document.getElementById('chk-uppercase');
    const chkLower = document.getElementById('chk-lowercase');
    const chkNumbers = document.getElementById('chk-numbers');
    const chkSymbols = document.getElementById('chk-symbols');

    const chars = {
        upper: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ',
        lower: 'abcdefghijklmnopqrstuvwxyz',
        numbers: '0123456789',
        symbols: '!@#$%^&*()_+-=[]{}|;:,.<>?'
    };

    function generate() {
        const length = parseInt(lengthRange.value);
        let validChars = '';
        if (chkUpper.checked) validChars += chars.upper;
        if (chkLower.checked) validChars += chars.lower;
        if (chkNumbers.checked) validChars += chars.numbers;
        if (chkSymbols.checked) validChars += chars.symbols;

        if (validChars === '') {
            output.value = 'Selecciona al menos una opción';
            return;
        }

        let password = '';
        const array = new Uint32Array(length);
        window.crypto.getRandomValues(array);

        for (let i = 0; i < length; i++) {
            password += validChars[array[i] % validChars.length];
        }

        output.value = password;
    }

    lengthRange.addEventListener('input', (e) => {
        lengthVal.textContent = e.target.value;
    });

    generateBtn.addEventListener('click', generate);

    copyBtn.addEventListener('click', () => {
        if (!output.value || output.value === 'Selecciona al menos una opción') return;
        
        navigator.clipboard.writeText(output.value);
        copyFeedback.classList.remove('opacity-0');
        setTimeout(() => copyFeedback.classList.add('opacity-0'), 2000);
    });

    // Init
    generate();
</script>
