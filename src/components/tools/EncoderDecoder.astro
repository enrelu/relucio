---
---
<div class="h-full flex flex-col">
    <div class="mb-4">
        <h3 class="text-xl font-bold text-zinc-900 dark:text-zinc-100 mb-2">Codificador / Decodificador</h3>
        <p class="text-sm text-zinc-600 dark:text-zinc-400">Convierte texto entre formatos comunes.</p>
    </div>

    <!-- Tabs -->
    <div class="flex space-x-1 bg-zinc-100 dark:bg-zinc-800 p-1 rounded-lg mb-4">
        <button id="tab-base64" class="flex-1 py-1.5 text-sm font-medium rounded-md bg-white dark:bg-zinc-700 shadow text-zinc-900 dark:text-zinc-100 transition-all">Base64</button>
        <button id="tab-url" class="flex-1 py-1.5 text-sm font-medium rounded-md text-zinc-500 hover:text-zinc-900 dark:hover:text-zinc-300 transition-all">URL</button>
    </div>

    <div class="flex-grow flex flex-col gap-4">
        <textarea id="encoder-input" rows="3" placeholder="Entrada..." 
            class="w-full px-4 py-3 rounded-lg bg-zinc-50 dark:bg-zinc-900/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-zinc-100 focus:outline-none focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500 transition-all resize-none font-mono text-sm"></textarea>
        
        <div class="flex gap-2">
            <button id="btn-encode" class="flex-1 px-4 py-2 bg-zinc-900 dark:bg-zinc-100 text-white dark:text-zinc-900 text-sm font-bold rounded-lg hover:bg-orange-600 dark:hover:bg-orange-400 hover:text-white transition-colors">
                Codificar ↓
            </button>
            <button id="btn-decode" class="flex-1 px-4 py-2 bg-zinc-200 dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 text-sm font-bold rounded-lg hover:bg-zinc-300 dark:hover:bg-zinc-700 transition-colors">
                Decodificar ↑
            </button>
        </div>

        <textarea id="encoder-output" rows="3" readonly placeholder="Salida..." 
            class="w-full px-4 py-3 rounded-lg bg-zinc-100 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-zinc-100 focus:outline-none font-mono text-sm"></textarea>
    </div>
</div>

<script>
    const tabBase64 = document.getElementById('tab-base64');
    const tabUrl = document.getElementById('tab-url');
    const input = document.getElementById('encoder-input');
    const output = document.getElementById('encoder-output');
    const btnEncode = document.getElementById('btn-encode');
    const btnDecode = document.getElementById('btn-decode');

    let mode = 'base64'; // base64 | url

    function setMode(newMode) {
        mode = newMode;
        if (mode === 'base64') {
            tabBase64.classList.add('bg-white', 'dark:bg-zinc-700', 'shadow', 'text-zinc-900', 'dark:text-zinc-100');
            tabBase64.classList.remove('text-zinc-500');
            tabUrl.classList.remove('bg-white', 'dark:bg-zinc-700', 'shadow', 'text-zinc-900', 'dark:text-zinc-100');
            tabUrl.classList.add('text-zinc-500');
        } else {
            tabUrl.classList.add('bg-white', 'dark:bg-zinc-700', 'shadow', 'text-zinc-900', 'dark:text-zinc-100');
            tabUrl.classList.remove('text-zinc-500');
            tabBase64.classList.remove('bg-white', 'dark:bg-zinc-700', 'shadow', 'text-zinc-900', 'dark:text-zinc-100');
            tabBase64.classList.add('text-zinc-500');
        }
        // Limpiar
        input.value = '';
        output.value = '';
    }

    tabBase64.addEventListener('click', () => setMode('base64'));
    tabUrl.addEventListener('click', () => setMode('url'));

    btnEncode.addEventListener('click', () => {
        try {
            if (mode === 'base64') {
                output.value = btoa(input.value);
            } else {
                output.value = encodeURIComponent(input.value);
            }
        } catch (e) {
            output.value = "Error: Entrada inválida";
        }
    });

    btnDecode.addEventListener('click', () => {
        try {
            if (mode === 'base64') {
                input.value = atob(output.value || input.value); // Support decoding from input box if output is empty
                if (output.value) output.value = ""; // Move result to input effectively? Or just show in output? 
                // Let's standardise: Input -> Button -> Output.
                // Decoding usually means taking the Input (which is encoded) and producing Output.
                output.value = atob(input.value);
            } else {
                output.value = decodeURIComponent(input.value);
            }
        } catch (e) {
            output.value = "Error: Formato inválido";
        }
    });
</script>
