---
---
<button id="theme-toggle" class="theme-toggle" aria-label="Cambiar tema">
  <svg class="sun" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></svg>
  <svg class="moon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/></svg>
</button>

<style>
  .theme-toggle {
    position: fixed;
    top: 1.5rem;
    right: 1.5rem;
    z-index: 9999; /* Máxima prioridad */
    padding: 0.6rem;
    border-radius: 0.75rem;
    cursor: pointer;
    background: rgba(255, 255, 255, 0.8);
    border: 1px solid #e4e4e7;
    backdrop-filter: blur(8px);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
  }

  :global(.dark) .theme-toggle {
    background: rgba(24, 24, 27, 0.8);
    border-color: #27272a;
  }

  .sun { display: none; color: #fbbf24; }
  .moon { display: block; color: #71717a; }

  :global(.dark) .sun { display: block; }
  :global(.dark) .moon { display: none; }

  .theme-toggle:hover {
    transform: scale(1.1);
  }
</style>

<script>
  function setupTheme() {
    const themeToggle = document.getElementById('theme-toggle');
    
    const handleToggleClick = () => {
      const element = document.documentElement;
      element.classList.toggle("dark");
      const isDark = element.classList.contains("dark");
      localStorage.setItem("theme", isDark ? "dark" : "light");
    };

    themeToggle?.addEventListener('click', handleToggleClick);
  }

  // Ejecutar en carga inicial
  setupTheme();

  // Ejecutar cada vez que Astro cambie de página (si usas ViewTransitions)
  document.addEventListener('astro:after-swap', setupTheme);
</script>