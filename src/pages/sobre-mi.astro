---
import Layout from '../layouts/Layout.astro';
import Section from '../components/Section.astro';

// Datos de competencias
const skills = [
  {
    title: "Desarrollo de Negocio",
    description: "Creación y escalado de unidades de negocio, gestión de ofertas complejas y negociación estratégica de alto nivel."
  },
  {
    title: "Gestión de Licitaciones",
    description: "Experiencia sólida en la redacción técnica, defensa y gestión integral de RFPs y pliegos para el sector público (Bid Management)."
  },
  {
    title: "Consultoría de Ciberseguridad",
    description: "Profundo conocimiento del estado del arte y vendors. Capacidad para prescribir arquitecturas y traducir necesidades técnicas en valor de negocio."
  },
  {
    title: "Project Management",
    description: "Dirección de equipos multidisciplinares y supervisión financiera de la ejecución para garantizar el margen del proyecto."
  }
];
---

<Layout title="Sobre mí - Enrique Relucio" description="Ingeniero de Telecomunicación especializado en Desarrollo de Negocio y Ciberseguridad.">
  
  <div class="flex flex-col gap-12">
    
    {/* CABECERA: Foto + Titular */}
    <div class="flex flex-col md:flex-row items-center gap-8 mt-2 animate-fade-in">
      <div class="shrink-0 relative group">
        <div class="absolute -inset-1 bg-gradient-to-r from-zinc-200 to-zinc-400 dark:from-zinc-700 dark:to-zinc-800 rounded-2xl blur opacity-25 group-hover:opacity-50 transition duration-1000"></div>
        <img 
          src="sobre_mi.jpg" 
          alt="Enrique Relucio" 
          class="relative w-32 h-32 md:w-40 md:h-40 rounded-2xl shadow-lg border border-zinc-100 dark:border-zinc-800 object-cover"
        />
      </div>
      <div class="flex flex-col gap-4 text-center md:text-left">
        <h1 class="text-4xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-zinc-50">
          Sobre mi
        </h1>
        <h2 class="text-lg md:text-xl font-medium text-zinc-500 dark:text-zinc-400 text-pretty">
          Ingeniero de Telecomunicación <span class="text-zinc-300 dark:text-zinc-700">|</span> Desarrollo de negocio <span class="text-zinc-300 dark:text-zinc-700">|</span> Consultoría estratégica
        </h2>
      </div>
    </div>

    {/* BIO PRINCIPAL */}
    <Section title="Trayectoria">
      <div class="prose prose-lg prose-zinc dark:prose-invert max-w-none text-zinc-600 dark:text-zinc-400 leading-relaxed">
        <p>
          Cuento con ocho años de experiencia impulsando el crecimiento de negocio en el sector tecnológico, tanto en el ámbito corporativo como en el público (B2B/B2G). Mi trayectoria se define por la capacidad de <strong class="text-zinc-900 dark:text-zinc-100 font-semibold">transformar capacidades técnicas en unidades de negocio rentables</strong>.
        </p>
        <p>
          He liderado la creación de nuevas líneas de actividad desde su planificación estratégica hasta su maduración financiera. Mi gestión abarca el ciclo completo: definición de portfolio, servitización, captación de clientes clave y responsabilidad sobre la cuenta de resultados (P&L).
        </p>
      </div>
    </Section>

    {/* ESTADÍSTICAS ANIMADAS */}
    <div class="grid grid-cols-2 gap-4 my-6">
      
      {/* CARD 1: Proyectos */}
      <div class="group relative flex flex-col items-center justify-center p-8 bg-zinc-50 dark:bg-zinc-900/40 rounded-3xl border border-zinc-100 dark:border-zinc-800 overflow-hidden hover:border-zinc-200 dark:hover:border-zinc-700 transition-all duration-500">
        <div class="absolute inset-0 bg-gradient-to-br from-white via-transparent to-transparent dark:from-zinc-800/20 opacity-50"></div>
        <div class="relative z-10 flex flex-col items-center">
            <span class="text-5xl md:text-7xl font-bold text-zinc-900 dark:text-zinc-50 mb-1 tracking-tighter tabular-nums">
                +<span class="counter" data-target="150">0</span>
            </span>
            <span class="text-xs md:text-sm font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-center">Proyectos Liderados</span>
        </div>
      </div>

      {/* CARD 2: Clientes */}
      <div class="group relative flex flex-col items-center justify-center p-8 bg-zinc-50 dark:bg-zinc-900/40 rounded-3xl border border-zinc-100 dark:border-zinc-800 overflow-hidden hover:border-zinc-200 dark:hover:border-zinc-700 transition-all duration-500">
        <div class="absolute inset-0 bg-gradient-to-br from-white via-transparent to-transparent dark:from-zinc-800/20 opacity-50"></div>
         <div class="relative z-10 flex flex-col items-center">
            <span class="text-5xl md:text-7xl font-bold text-zinc-900 dark:text-zinc-50 mb-1 tracking-tighter tabular-nums">
                +<span class="counter" data-target="60">0</span>
            </span>
            <span class="text-xs md:text-sm font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-center">Clientes Gestionados</span>
         </div>
      </div>

       {/* CARD 3: Negocio */}
      <div class="group relative flex flex-col items-center justify-center p-8 bg-zinc-50 dark:bg-zinc-900/40 rounded-3xl border border-zinc-100 dark:border-zinc-800 overflow-hidden hover:border-zinc-200 dark:hover:border-zinc-700 transition-all duration-500">
        <div class="absolute inset-0 bg-gradient-to-br from-white via-transparent to-transparent dark:from-zinc-800/20 opacity-50"></div>
         <div class="relative z-10 flex flex-col items-center">
            <span class="text-5xl md:text-7xl font-bold text-zinc-900 dark:text-zinc-50 mb-1 tracking-tighter tabular-nums">
                +<span class="counter" data-target="10">0</span>
            </span>
            <span class="text-xs md:text-sm font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-center">Volúmen de Negocio (M€)</span>
         </div>
      </div>

      {/* CARD 4: Personas */}
      <div class="group relative flex flex-col items-center justify-center p-8 bg-zinc-50 dark:bg-zinc-900/40 rounded-3xl border border-zinc-100 dark:border-zinc-800 overflow-hidden hover:border-zinc-200 dark:hover:border-zinc-700 transition-all duration-500">
        <div class="absolute inset-0 bg-gradient-to-br from-white via-transparent to-transparent dark:from-zinc-800/20 opacity-50"></div>
         <div class="relative z-10 flex flex-col items-center">
            <span class="text-5xl md:text-7xl font-bold text-zinc-900 dark:text-zinc-50 mb-1 tracking-tighter tabular-nums">
                +<span class="counter" data-target="50">0</span>
            </span>
            <span class="text-xs md:text-sm font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-center">Equipo de Ingenieros</span>
         </div>
      </div>

    </div>

    {/* COMPETENCIAS */}
    <Section title="Competencias Clave">
      <p class="mb-8 text-zinc-500 dark:text-zinc-400 text-lg">
        Más allá de la venta, aporto una visión integral de ingeniería:
      </p>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        {skills.map((skill) => (
          <div class="group p-6 rounded-2xl border border-zinc-200 dark:border-zinc-800 hover:bg-zinc-50 dark:hover:bg-zinc-900/60 transition-colors duration-300">
            <h3 class="font-semibold text-lg text-zinc-900 dark:text-zinc-100 mb-3 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors">
              {skill.title}
            </h3>
            <p class="text-sm text-zinc-600 dark:text-zinc-400 leading-relaxed text-pretty">
              {skill.description}
            </p>
          </div>
        ))}
      </div>
    </Section>

  </div>
</Layout>

<script>
  // Función para animar un contador específico
  const animateCounter = (counter: HTMLElement) => {
    const target = +counter.getAttribute('data-target')!;
    const duration = 2000; // Duración en ms
    const startTime = performance.now();

    const updateCount = (currentTime: number) => {
      const elapsed = currentTime - startTime;
      const progress = Math.min(elapsed / duration, 1);
      
      // Easing: easeOutQuart
      const ease = 1 - Math.pow(1 - progress, 4); 
      
      const currentVal = Math.floor(ease * target);
      counter.innerText = currentVal.toString();

      if (progress < 1) {
        requestAnimationFrame(updateCount);
      } else {
        counter.innerText = target.toString();
      }
    };

    requestAnimationFrame(updateCount);
  };

  // Configuración del Intersection Observer
  const observerOptions = {
    root: null,
    rootMargin: '0px',
    threshold: 0.1 // Se activa cuando el 10% del elemento es visible
  };

  const observer = new IntersectionObserver((entries, observer) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const counter = entry.target as HTMLElement;
        animateCounter(counter);
        observer.unobserve(counter); // Dejar de observar una vez animado
      }
    });
  }, observerOptions);

  // Iniciar observación cuando el DOM esté listo
  document.addEventListener('DOMContentLoaded', () => {
    const counters = document.querySelectorAll('.counter');
    counters.forEach(counter => observer.observe(counter));
  });
</script>